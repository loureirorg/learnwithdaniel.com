<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Update WordPress domain links after migration | Learn with Daniel - A learner diary</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/favicon-128.png">
    <link rel="manifest" href="/manifest.json">
    <meta name="description" content="A learner diary">
    
    <link rel="preload" href="/assets/css/0.styles.e0c1612b.css" as="style"><link rel="preload" href="/assets/js/app.5632ea00.js" as="script"><link rel="preload" href="/assets/js/3.9e1cc85f.js" as="script"><link rel="preload" href="/assets/js/59.5af9d54f.js" as="script"><link rel="preload" href="/assets/js/22.2ffb8c95.js" as="script"><link rel="prefetch" href="/assets/js/10.ab7cb67b.js"><link rel="prefetch" href="/assets/js/11.5242956c.js"><link rel="prefetch" href="/assets/js/12.59c1b827.js"><link rel="prefetch" href="/assets/js/13.eb4c0cc0.js"><link rel="prefetch" href="/assets/js/14.cd6385da.js"><link rel="prefetch" href="/assets/js/15.f6ed5cf0.js"><link rel="prefetch" href="/assets/js/16.60e48bf7.js"><link rel="prefetch" href="/assets/js/17.6ade2139.js"><link rel="prefetch" href="/assets/js/18.f3523bb9.js"><link rel="prefetch" href="/assets/js/19.0cd9be83.js"><link rel="prefetch" href="/assets/js/20.74e5d0bb.js"><link rel="prefetch" href="/assets/js/21.057bc373.js"><link rel="prefetch" href="/assets/js/23.45611473.js"><link rel="prefetch" href="/assets/js/24.2c5aaad4.js"><link rel="prefetch" href="/assets/js/25.53994f14.js"><link rel="prefetch" href="/assets/js/26.4b88dd5e.js"><link rel="prefetch" href="/assets/js/27.33da5e65.js"><link rel="prefetch" href="/assets/js/28.e1bc1897.js"><link rel="prefetch" href="/assets/js/29.41a44f48.js"><link rel="prefetch" href="/assets/js/30.b52a01e3.js"><link rel="prefetch" href="/assets/js/31.32e50696.js"><link rel="prefetch" href="/assets/js/32.9870be67.js"><link rel="prefetch" href="/assets/js/33.6be9bedc.js"><link rel="prefetch" href="/assets/js/34.95333d7a.js"><link rel="prefetch" href="/assets/js/35.b90c291b.js"><link rel="prefetch" href="/assets/js/36.853d11aa.js"><link rel="prefetch" href="/assets/js/37.fe79cc5b.js"><link rel="prefetch" href="/assets/js/38.aef7ef02.js"><link rel="prefetch" href="/assets/js/39.dca7aa67.js"><link rel="prefetch" href="/assets/js/4.37520176.js"><link rel="prefetch" href="/assets/js/40.d659d938.js"><link rel="prefetch" href="/assets/js/41.83aeacc5.js"><link rel="prefetch" href="/assets/js/42.610c5aca.js"><link rel="prefetch" href="/assets/js/43.e9222b3a.js"><link rel="prefetch" href="/assets/js/44.9858f816.js"><link rel="prefetch" href="/assets/js/45.b0f0f5f2.js"><link rel="prefetch" href="/assets/js/46.492b33ea.js"><link rel="prefetch" href="/assets/js/47.07c3328b.js"><link rel="prefetch" href="/assets/js/48.b2d7476f.js"><link rel="prefetch" href="/assets/js/49.9fd583ed.js"><link rel="prefetch" href="/assets/js/5.b259d54e.js"><link rel="prefetch" href="/assets/js/50.9e6ef79d.js"><link rel="prefetch" href="/assets/js/51.8c3776f7.js"><link rel="prefetch" href="/assets/js/52.92a4b980.js"><link rel="prefetch" href="/assets/js/53.3e72d3bc.js"><link rel="prefetch" href="/assets/js/54.e1e107ff.js"><link rel="prefetch" href="/assets/js/55.418768d6.js"><link rel="prefetch" href="/assets/js/56.95ca3ac0.js"><link rel="prefetch" href="/assets/js/57.ea7fb933.js"><link rel="prefetch" href="/assets/js/58.40c5610c.js"><link rel="prefetch" href="/assets/js/6.70c0bce3.js"><link rel="prefetch" href="/assets/js/60.0c66c22f.js"><link rel="prefetch" href="/assets/js/61.05b88817.js"><link rel="prefetch" href="/assets/js/62.483e5481.js"><link rel="prefetch" href="/assets/js/63.6ab28e82.js"><link rel="prefetch" href="/assets/js/7.8d26dacd.js"><link rel="prefetch" href="/assets/js/8.6beb7cbb.js"><link rel="prefetch" href="/assets/js/9.5015eb07.js"><link rel="prefetch" href="/assets/js/vuejs-paginate.92df942c.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e0c1612b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="dark:bg-gray-1000 bg-white dark:text-sepia text-gray-900" data-v-335698aa><header class="border-b-4 dark:border-green-700 border-primary" data-v-335698aa><div class="container mx-auto flex h-20 px-6 items-center"><a href="/" class="dark:text-green-700 text-primary text-3xl router-link-active">
            Learn With Daniel
        </a></div></header> <div class="container mx-auto px-6 md:px-16 py-8 max-w-screen-md" data-v-335698aa><div class="py-8 md:py-16" data-v-335698aa><div data-v-335698aa><span class="dark:bg-gray-800 bg-gray-100 px-3 py-1 mx-1 rounded-full uppercase text-xs font-medium dark:text-green-700 tracking-wider" data-v-335698aa>
                    PHP
                </span><span class="dark:bg-gray-800 bg-gray-100 px-3 py-1 mx-1 rounded-full uppercase text-xs font-medium dark:text-green-700 tracking-wider" data-v-335698aa>
                    WordPress
                </span><span class="dark:bg-gray-800 bg-gray-100 px-3 py-1 mx-1 rounded-full uppercase text-xs font-medium dark:text-green-700 tracking-wider" data-v-335698aa>
                    IT Ops
                </span></div> <h1 class="dark:text-green-500 text-4xl md:text-6xl py-6" data-v-335698aa>Update WordPress domain links after migration</h1> <p class="author text-sm" data-v-335698aa>
                by <span class="text-base font-bold" data-v-335698aa>Daniel Loureiro</span>
                on <time class="mr-3" data-v-335698aa>Nov 29, 2020</time> <span class="reading-time text-xs uppercase py-4 block md:inline-block md:py-9" data-v-335698aa><vp-icon size="1.5em" name="clock-best" class="inline-block" data-v-335698aa></vp-icon>
                    2 min read
                </span></p></div> <div class="post-wrap text-xl leading-10 pb-8" data-v-335698aa><div class="content__default" data-v-335698aa><p>Let's see how to update your domain links after a WordPress migration.
</p> <h2 id="take-a-look-at-the-database"><a href="#take-a-look-at-the-database" class="header-anchor">#</a> Take a look at the database</h2> <p>Let's see how the links look on the db:</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> wp_options <span class="token keyword">WHERE</span> option_name <span class="token operator">=</span> <span class="token string">'home'</span> <span class="token operator">OR</span> option_name <span class="token operator">=</span> <span class="token string">'siteurl'</span><span class="token punctuation">;</span>
</code></pre></div><p>Result:</p> <div class="language-textile extra-class"><pre class="language-textile"><code><span class="token phrase"><span class="token inline"><span class="token punctuation">+</span><span class="token inserted"><span class="token inline"><span class="token punctuation">-</span><span class="token deleted">-</span><span class="token punctuation">-</span></span><span class="token inline"><span class="token punctuation">-</span><span class="token deleted">-</span><span class="token punctuation">-</span></span><span class="token inline"><span class="token punctuation">-</span><span class="token deleted">-</span><span class="token punctuation">-</span></span>--</span><span class="token punctuation">+</span></span><span class="token inline"><span class="token punctuation">-</span><span class="token deleted">-</span><span class="token punctuation">-</span></span><span class="token inline"><span class="token punctuation">-</span><span class="token deleted">-</span><span class="token punctuation">-</span></span><span class="token inline"><span class="token punctuation">-</span><span class="token deleted">-</span><span class="token punctuation">-</span></span><span class="token inline"><span class="token punctuation">-</span><span class="token deleted">-</span><span class="token punctuation">-</span></span><span class="token inline"><span class="token punctuation">-</span><span class="token deleted">+</span><span class="token punctuation">-</span></span><span class="token inline"><span class="token punctuation">-</span><span class="token deleted">-</span><span class="token punctuation">-</span></span><span class="token inline"><span class="token punctuation">-</span><span class="token deleted">-</span><span class="token punctuation">-</span></span><span class="token inline"><span class="token punctuation">-</span><span class="token deleted">-</span><span class="token punctuation">-</span></span><span class="token inline"><span class="token punctuation">-</span><span class="token deleted">-</span><span class="token punctuation">-</span></span><span class="token inline"><span class="token punctuation">-</span><span class="token deleted">-</span><span class="token punctuation">-</span></span><span class="token inline"><span class="token punctuation">-</span><span class="token deleted">-</span><span class="token punctuation">-</span></span><span class="token inline"><span class="token punctuation">-</span><span class="token deleted">-</span><span class="token punctuation">-</span></span><span class="token inline"><span class="token punctuation">-</span><span class="token deleted">-</span><span class="token punctuation">-</span></span><span class="token inline"><span class="token punctuation">-</span><span class="token deleted">-</span><span class="token punctuation">-</span></span><span class="token inline"><span class="token punctuation">-</span><span class="token deleted">-+</span><span class="token punctuation">-</span></span><span class="token inline"><span class="token punctuation">-</span><span class="token deleted">-</span><span class="token punctuation">-</span></span><span class="token inline"><span class="token punctuation">-</span><span class="token deleted">-</span><span class="token punctuation">-</span></span><span class="token inline"><span class="token punctuation">-</span><span class="token deleted">-</span><span class="token punctuation">-</span></span>+
<span class="token table"><span class="token punctuation">|</span> option_id <span class="token punctuation">|</span> option_name <span class="token punctuation">|</span> option_value                 <span class="token punctuation">|</span> autoload <span class="token punctuation">|</span>
<span class="token inline"><span class="token punctuation">+</span><span class="token inserted"><span class="token inline"><span class="token punctuation">-</span><span class="token deleted">-</span><span class="token punctuation">-</span></span><span class="token inline"><span class="token punctuation">-</span><span class="token deleted">-</span><span class="token punctuation">-</span></span><span class="token inline"><span class="token punctuation">-</span><span class="token deleted">-</span><span class="token punctuation">-</span></span>--</span><span class="token punctuation">+</span></span><span class="token inline"><span class="token punctuation">-</span><span class="token deleted">-</span><span class="token punctuation">-</span></span><span class="token inline"><span class="token punctuation">-</span><span class="token deleted">-</span><span class="token punctuation">-</span></span><span class="token inline"><span class="token punctuation">-</span><span class="token deleted">-</span><span class="token punctuation">-</span></span><span class="token inline"><span class="token punctuation">-</span><span class="token deleted">-</span><span class="token punctuation">-</span></span><span class="token inline"><span class="token punctuation">-</span><span class="token deleted">+</span><span class="token punctuation">-</span></span><span class="token inline"><span class="token punctuation">-</span><span class="token deleted">-</span><span class="token punctuation">-</span></span><span class="token inline"><span class="token punctuation">-</span><span class="token deleted">-</span><span class="token punctuation">-</span></span><span class="token inline"><span class="token punctuation">-</span><span class="token deleted">-</span><span class="token punctuation">-</span></span><span class="token inline"><span class="token punctuation">-</span><span class="token deleted">-</span><span class="token punctuation">-</span></span><span class="token inline"><span class="token punctuation">-</span><span class="token deleted">-</span><span class="token punctuation">-</span></span><span class="token inline"><span class="token punctuation">-</span><span class="token deleted">-</span><span class="token punctuation">-</span></span><span class="token inline"><span class="token punctuation">-</span><span class="token deleted">-</span><span class="token punctuation">-</span></span><span class="token inline"><span class="token punctuation">-</span><span class="token deleted">-</span><span class="token punctuation">-</span></span><span class="token inline"><span class="token punctuation">-</span><span class="token deleted">-</span><span class="token punctuation">-</span></span><span class="token inline"><span class="token punctuation">-</span><span class="token deleted">-+</span><span class="token punctuation">-</span></span><span class="token inline"><span class="token punctuation">-</span><span class="token deleted">-</span><span class="token punctuation">-</span></span><span class="token inline"><span class="token punctuation">-</span><span class="token deleted">-</span><span class="token punctuation">-</span></span><span class="token inline"><span class="token punctuation">-</span><span class="token deleted">-</span><span class="token punctuation">-</span></span>+
<span class="token punctuation">|</span>         2 <span class="token punctuation">|</span> home        <span class="token punctuation">|</span> https://myold-domain.com     <span class="token punctuation">|</span> yes      <span class="token punctuation">|</span>
<span class="token punctuation">|</span>         1 <span class="token punctuation">|</span> siteurl     <span class="token punctuation">|</span> https://myold-domain.com     <span class="token punctuation">|</span> yes      <span class="token punctuation">|</span></span>
<span class="token inline"><span class="token punctuation">+</span><span class="token inserted"><span class="token inline"><span class="token punctuation">-</span><span class="token deleted">-</span><span class="token punctuation">-</span></span><span class="token inline"><span class="token punctuation">-</span><span class="token deleted">-</span><span class="token punctuation">-</span></span><span class="token inline"><span class="token punctuation">-</span><span class="token deleted">-</span><span class="token punctuation">-</span></span>--</span><span class="token punctuation">+</span></span><span class="token inline"><span class="token punctuation">-</span><span class="token deleted">-</span><span class="token punctuation">-</span></span><span class="token inline"><span class="token punctuation">-</span><span class="token deleted">-</span><span class="token punctuation">-</span></span><span class="token inline"><span class="token punctuation">-</span><span class="token deleted">-</span><span class="token punctuation">-</span></span><span class="token inline"><span class="token punctuation">-</span><span class="token deleted">-</span><span class="token punctuation">-</span></span><span class="token inline"><span class="token punctuation">-</span><span class="token deleted">+</span><span class="token punctuation">-</span></span><span class="token inline"><span class="token punctuation">-</span><span class="token deleted">-</span><span class="token punctuation">-</span></span><span class="token inline"><span class="token punctuation">-</span><span class="token deleted">-</span><span class="token punctuation">-</span></span><span class="token inline"><span class="token punctuation">-</span><span class="token deleted">-</span><span class="token punctuation">-</span></span><span class="token inline"><span class="token punctuation">-</span><span class="token deleted">-</span><span class="token punctuation">-</span></span><span class="token inline"><span class="token punctuation">-</span><span class="token deleted">-</span><span class="token punctuation">-</span></span><span class="token inline"><span class="token punctuation">-</span><span class="token deleted">-</span><span class="token punctuation">-</span></span><span class="token inline"><span class="token punctuation">-</span><span class="token deleted">-</span><span class="token punctuation">-</span></span><span class="token inline"><span class="token punctuation">-</span><span class="token deleted">-</span><span class="token punctuation">-</span></span><span class="token inline"><span class="token punctuation">-</span><span class="token deleted">-</span><span class="token punctuation">-</span></span><span class="token inline"><span class="token punctuation">-</span><span class="token deleted">-+</span><span class="token punctuation">-</span></span><span class="token inline"><span class="token punctuation">-</span><span class="token deleted">-</span><span class="token punctuation">-</span></span><span class="token inline"><span class="token punctuation">-</span><span class="token deleted">-</span><span class="token punctuation">-</span></span><span class="token inline"><span class="token punctuation">-</span><span class="token deleted">-</span><span class="token punctuation">-</span></span>+
2 rows in set (0.00 sec)
</span></code></pre></div><p>As you see, the links have the <strong>domain</strong> plus the <strong>protocol</strong> (<code>http</code> or <code>https</code>).</p> <h2 id="do-the-changes"><a href="#do-the-changes" class="header-anchor">#</a> Do the changes</h2> <p>Run these queries on your MySQL console.</p> <p>Replace <code>New</code> with your new domain (ex. <code>mynew-domain.com</code>). Replace <code>Old</code> with your old domain (ex. <code>myold-domain.com</code>):</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">UPDATE</span> wp_options <span class="token keyword">SET</span> option_value <span class="token operator">=</span> <span class="token keyword">replace</span><span class="token punctuation">(</span>option_value<span class="token punctuation">,</span> <span class="token string">'Old'</span><span class="token punctuation">,</span> <span class="token string">'New'</span><span class="token punctuation">)</span> <span class="token keyword">WHERE</span> option_name <span class="token operator">=</span> <span class="token string">'home'</span> <span class="token operator">OR</span> option_name <span class="token operator">=</span> <span class="token string">'siteurl'</span><span class="token punctuation">;</span>
<span class="token keyword">UPDATE</span> wp_posts <span class="token keyword">SET</span> post_content <span class="token operator">=</span> <span class="token keyword">replace</span><span class="token punctuation">(</span>post_content<span class="token punctuation">,</span> <span class="token string">'Old'</span><span class="token punctuation">,</span> <span class="token string">'New'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">UPDATE</span> wp_postmeta <span class="token keyword">SET</span> meta_value <span class="token operator">=</span> <span class="token keyword">replace</span><span class="token punctuation">(</span>meta_value<span class="token punctuation">,</span><span class="token string">'Old'</span><span class="token punctuation">,</span><span class="token string">'New'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">UPDATE</span> wp_usermeta <span class="token keyword">SET</span> meta_value <span class="token operator">=</span> <span class="token keyword">replace</span><span class="token punctuation">(</span>meta_value<span class="token punctuation">,</span> <span class="token string">'Old'</span><span class="token punctuation">,</span><span class="token string">'New'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">UPDATE</span> wp_links <span class="token keyword">SET</span> link_url <span class="token operator">=</span> <span class="token keyword">replace</span><span class="token punctuation">(</span>link_url<span class="token punctuation">,</span> <span class="token string">'Old'</span><span class="token punctuation">,</span><span class="token string">'New'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">UPDATE</span> wp_comments <span class="token keyword">SET</span> comment_content <span class="token operator">=</span> <span class="token keyword">replace</span><span class="token punctuation">(</span>comment_content <span class="token punctuation">,</span> <span class="token string">'Old'</span><span class="token punctuation">,</span><span class="token string">'New'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Do a <strong>backup</strong> before doing any changes. Use a WP backup plugin for this.</p></div> <h2 id="http-vs-https"><a href="#http-vs-https" class="header-anchor">#</a> HTTP vs HTTPS</h2> <p>Use the same queries to fix any <code>http</code> into <code>https</code>. Just re-run them replacing <code>New</code> with <code>https://</code> and <code>Old</code> with <code>http://</code>.</p> <h2 id="mysql-credentials"><a href="#mysql-credentials" class="header-anchor">#</a> MySQL Credentials</h2> <p>If you don't have the credentials, they are on <code>wp-config</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/** MySQL database username */</span>
<span class="token function">define</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'DB_USER'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'daniel'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/** MySQL database password */</span>
<span class="token function">define</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'DB_PASSWORD'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'10203040'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/** MySQL hostname */</span>
<span class="token function">define</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'DB_HOST'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'localhost'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="troubleshooting-can-t-access-admin-dashboard"><a href="#troubleshooting-can-t-access-admin-dashboard" class="header-anchor">#</a> Troubleshooting: Can't access <code>admin</code> dashboard</h2> <p>If for some reason you can't access the admin dashboard, edit <code>wp-config.php</code> and set your new domain:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token function">define</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'WP_HOME'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'https://example.com'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">define</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'WP_SITEURL'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'https://example.com'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div></div> <hr class="my-12" data-v-335698aa> <div data-v-335698aa><h2 class="text-xl md:text-3xl pb-10 text-center" data-v-335698aa>Comments</h2> <!----></div></div> <footer class="py-4 bg-gray-800" data-v-335698aa><p class="text-center text-gray-600 text-xs">Copyright 2022 - Daniel Loureiro</p></footer></div><div class="global-ui"><!----><!----><!----></div></div>
    <script src="/assets/js/app.5632ea00.js" defer></script><script src="/assets/js/3.9e1cc85f.js" defer></script><script src="/assets/js/59.5af9d54f.js" defer></script><script src="/assets/js/22.2ffb8c95.js" defer></script>
  </body>
</html>
