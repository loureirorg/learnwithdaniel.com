<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Rails Server with Apache + Puma (via reverse proxy) | Learn with Daniel - A learner diary</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/favicon-128.png">
    <link rel="manifest" href="/manifest.json">
    <meta name="description" content="A learner diary">
    
    <link rel="preload" href="/assets/css/0.styles.e0c1612b.css" as="style"><link rel="preload" href="/assets/js/app.5632ea00.js" as="script"><link rel="preload" href="/assets/js/3.9e1cc85f.js" as="script"><link rel="preload" href="/assets/js/23.45611473.js" as="script"><link rel="preload" href="/assets/js/22.2ffb8c95.js" as="script"><link rel="prefetch" href="/assets/js/10.ab7cb67b.js"><link rel="prefetch" href="/assets/js/11.5242956c.js"><link rel="prefetch" href="/assets/js/12.59c1b827.js"><link rel="prefetch" href="/assets/js/13.eb4c0cc0.js"><link rel="prefetch" href="/assets/js/14.cd6385da.js"><link rel="prefetch" href="/assets/js/15.f6ed5cf0.js"><link rel="prefetch" href="/assets/js/16.60e48bf7.js"><link rel="prefetch" href="/assets/js/17.6ade2139.js"><link rel="prefetch" href="/assets/js/18.f3523bb9.js"><link rel="prefetch" href="/assets/js/19.0cd9be83.js"><link rel="prefetch" href="/assets/js/20.74e5d0bb.js"><link rel="prefetch" href="/assets/js/21.057bc373.js"><link rel="prefetch" href="/assets/js/24.2c5aaad4.js"><link rel="prefetch" href="/assets/js/25.53994f14.js"><link rel="prefetch" href="/assets/js/26.4b88dd5e.js"><link rel="prefetch" href="/assets/js/27.33da5e65.js"><link rel="prefetch" href="/assets/js/28.e1bc1897.js"><link rel="prefetch" href="/assets/js/29.41a44f48.js"><link rel="prefetch" href="/assets/js/30.b52a01e3.js"><link rel="prefetch" href="/assets/js/31.32e50696.js"><link rel="prefetch" href="/assets/js/32.9870be67.js"><link rel="prefetch" href="/assets/js/33.6be9bedc.js"><link rel="prefetch" href="/assets/js/34.95333d7a.js"><link rel="prefetch" href="/assets/js/35.b90c291b.js"><link rel="prefetch" href="/assets/js/36.853d11aa.js"><link rel="prefetch" href="/assets/js/37.fe79cc5b.js"><link rel="prefetch" href="/assets/js/38.aef7ef02.js"><link rel="prefetch" href="/assets/js/39.dca7aa67.js"><link rel="prefetch" href="/assets/js/4.37520176.js"><link rel="prefetch" href="/assets/js/40.d659d938.js"><link rel="prefetch" href="/assets/js/41.83aeacc5.js"><link rel="prefetch" href="/assets/js/42.610c5aca.js"><link rel="prefetch" href="/assets/js/43.e9222b3a.js"><link rel="prefetch" href="/assets/js/44.9858f816.js"><link rel="prefetch" href="/assets/js/45.b0f0f5f2.js"><link rel="prefetch" href="/assets/js/46.492b33ea.js"><link rel="prefetch" href="/assets/js/47.07c3328b.js"><link rel="prefetch" href="/assets/js/48.b2d7476f.js"><link rel="prefetch" href="/assets/js/49.9fd583ed.js"><link rel="prefetch" href="/assets/js/5.b259d54e.js"><link rel="prefetch" href="/assets/js/50.9e6ef79d.js"><link rel="prefetch" href="/assets/js/51.8c3776f7.js"><link rel="prefetch" href="/assets/js/52.92a4b980.js"><link rel="prefetch" href="/assets/js/53.3e72d3bc.js"><link rel="prefetch" href="/assets/js/54.e1e107ff.js"><link rel="prefetch" href="/assets/js/55.418768d6.js"><link rel="prefetch" href="/assets/js/56.95ca3ac0.js"><link rel="prefetch" href="/assets/js/57.ea7fb933.js"><link rel="prefetch" href="/assets/js/58.40c5610c.js"><link rel="prefetch" href="/assets/js/59.5af9d54f.js"><link rel="prefetch" href="/assets/js/6.70c0bce3.js"><link rel="prefetch" href="/assets/js/60.0c66c22f.js"><link rel="prefetch" href="/assets/js/61.05b88817.js"><link rel="prefetch" href="/assets/js/62.483e5481.js"><link rel="prefetch" href="/assets/js/63.6ab28e82.js"><link rel="prefetch" href="/assets/js/7.8d26dacd.js"><link rel="prefetch" href="/assets/js/8.6beb7cbb.js"><link rel="prefetch" href="/assets/js/9.5015eb07.js"><link rel="prefetch" href="/assets/js/vuejs-paginate.92df942c.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e0c1612b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="dark:bg-gray-1000 bg-white dark:text-sepia text-gray-900" data-v-335698aa><header class="border-b-4 dark:border-green-700 border-primary" data-v-335698aa><div class="container mx-auto flex h-20 px-6 items-center"><a href="/" class="dark:text-green-700 text-primary text-3xl router-link-active">
            Learn With Daniel
        </a></div></header> <div class="container mx-auto px-6 md:px-16 py-8 max-w-screen-md" data-v-335698aa><div class="py-8 md:py-16" data-v-335698aa><div data-v-335698aa><span class="dark:bg-gray-800 bg-gray-100 px-3 py-1 mx-1 rounded-full uppercase text-xs font-medium dark:text-green-700 tracking-wider" data-v-335698aa>
                    Linux
                </span><span class="dark:bg-gray-800 bg-gray-100 px-3 py-1 mx-1 rounded-full uppercase text-xs font-medium dark:text-green-700 tracking-wider" data-v-335698aa>
                    Server
                </span><span class="dark:bg-gray-800 bg-gray-100 px-3 py-1 mx-1 rounded-full uppercase text-xs font-medium dark:text-green-700 tracking-wider" data-v-335698aa>
                    Configuration
                </span></div> <h1 class="dark:text-green-500 text-4xl md:text-6xl py-6" data-v-335698aa>Rails Server with Apache + Puma (via reverse proxy)</h1> <p class="author text-sm" data-v-335698aa>
                by <span class="text-base font-bold" data-v-335698aa>Daniel Loureiro</span>
                on <time class="mr-3" data-v-335698aa>Jan 20, 2015</time> <span class="reading-time text-xs uppercase py-4 block md:inline-block md:py-9" data-v-335698aa><vp-icon size="1.5em" name="clock-best" class="inline-block" data-v-335698aa></vp-icon>
                    5 min read
                </span></p></div> <div class="post-wrap text-xl leading-10 pb-8" data-v-335698aa><div class="content__default" data-v-335698aa><p>Let's run a Rails server using Puma and Apache. We will use Apache's reverse proxy and Puma's Jungle service.
</p> <h2 id="passenger-vs-puma-vs-unicorn"><a href="#passenger-vs-puma-vs-unicorn" class="header-anchor">#</a> Passenger vs Puma vs Unicorn</h2> <p>As for 2019, there are three main options to serve a Rails application:</p> <ul><li><strong>Phusion Passenger</strong></li> <li><strong>Puma</strong></li> <li><strong>Unicorn</strong></li></ul> <p><strong>Phusion Passenger</strong> is an Apache/Nginx module. It works just like mod_php (it is sometimes referred to <code>mod_rails</code>). Passenger is probably the most used solution in production environments.</p> <p><strong>Puma</strong> and <strong>Unicorn</strong>, are stand-alone web servers. If you call them inside a Rails project root folder, they will listen to the port 80 (or any other you specify), wait for web connections, run the Rails code and answer to the browser – no need for Apache, Nginx, or anything else.</p> <p>This tutorial shows how to run <strong>Puma with Apache</strong>. The only way to do this is through a <strong>reverse proxy</strong>, as there are no FastCGI or Apache/Nginx modules available.</p> <hr> <h2 id="_1-add-puma-to-gemfile"><a href="#_1-add-puma-to-gemfile" class="header-anchor">#</a> 1. Add puma to <code>Gemfile</code></h2> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>Ignore this entire step 1 for Rails 5+, as Puma is the default webserver.</p></div> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> /var/www/site-1
<span class="token function">nano</span> Gemfile
</code></pre></div><div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token comment"># Gemfile</span>
source <span class="token string">'https://rubygems.org'</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
gem <span class="token string">'puma'</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code>bundle <span class="token function">install</span>
</code></pre></div><h2 id="_2-create-replace-contents-of-puma-rb"><a href="#_2-create-replace-contents-of-puma-rb" class="header-anchor">#</a> 2. Create/replace contents of <code>puma.rb</code></h2> <p>First, check how many CPU cores you have:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">grep</span> -c processor /proc/cpuinfo
  <span class="token number">2</span>
</code></pre></div><p>Set <code>./config/puma.rb</code>:</p> <div class="language-ruby extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-ruby"><code><span class="token comment"># /var/www/site-1/config/puma.rb</span>
<span class="token comment"># Change to match your CPU core count</span>
workers <span class="token number">2</span>

<span class="token comment"># Min and Max threads per worker</span>
threads <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">6</span>

<span class="token comment"># Project folder</span>
app_dir <span class="token operator">=</span> <span class="token builtin">File</span><span class="token punctuation">.</span>expand_path<span class="token punctuation">(</span><span class="token string">&quot;../..&quot;</span><span class="token punctuation">,</span> __FILE__<span class="token punctuation">)</span>

<span class="token comment"># Default to production</span>
rails_env <span class="token operator">=</span> <span class="token constant">ENV</span><span class="token punctuation">.</span>fetch<span class="token punctuation">(</span><span class="token string">&quot;RAILS_ENV&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token string">&quot;production&quot;</span> <span class="token punctuation">}</span>
environment rails_env

<span class="token comment"># Set up socket location</span>
bind <span class="token string">&quot;unix://<span class="token interpolation"><span class="token delimiter tag">#{</span>app_dir<span class="token delimiter tag">}</span></span>/tmp/puma/puma.sock&quot;</span>

<span class="token comment"># Logs</span>
stdout_redirect <span class="token string">&quot;<span class="token interpolation"><span class="token delimiter tag">#{</span>app_dir<span class="token delimiter tag">}</span></span>/log/puma.stdout.log&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;<span class="token interpolation"><span class="token delimiter tag">#{</span>app_dir<span class="token delimiter tag">}</span></span>/log/puma.stderr.log&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span>

<span class="token comment"># Set master PID and state locations</span>
pidfile <span class="token string">&quot;<span class="token interpolation"><span class="token delimiter tag">#{</span>app_dir<span class="token delimiter tag">}</span></span>/tmp/puma/pid&quot;</span>
state_path <span class="token string">&quot;<span class="token interpolation"><span class="token delimiter tag">#{</span>app_dir<span class="token delimiter tag">}</span></span>/tmp/puma/state&quot;</span>

<span class="token comment"># Establish db connection for new processes</span>
on_worker_boot <span class="token keyword">do</span>
  <span class="token keyword">require</span> <span class="token string">&quot;active_record&quot;</span>
  <span class="token constant">ActiveSupport</span><span class="token punctuation">.</span>on_load<span class="token punctuation">(</span><span class="token symbol">:active_record</span><span class="token punctuation">)</span> <span class="token keyword">do</span>
    <span class="token constant">ActiveRecord</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token constant">Base</span><span class="token punctuation">.</span>establish_connection<span class="token punctuation">(</span><span class="token constant">YAML</span><span class="token punctuation">.</span>load_file<span class="token punctuation">(</span><span class="token string">&quot;<span class="token interpolation"><span class="token delimiter tag">#{</span>app_dir<span class="token delimiter tag">}</span></span>/config/database.yml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span>rails_env<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span>

<span class="token comment"># Allow puma to be restarted by `rails restart` command.</span>
plugin <span class="token symbol">:tmp_restart</span>

<span class="token comment"># Puma control rack application</span>
activate_control_app
</code></pre></div><p>Adjust the number of workers according to the number of CPU cores of your server. This will maximize performance.</p> <h2 id="_3-create-a-tmp-puma-folder"><a href="#_3-create-a-tmp-puma-folder" class="header-anchor">#</a> 3. Create a <code>./tmp/puma</code> folder</h2> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">mkdir</span> -p ./tmp/puma
</code></pre></div><p>This folder will contain the PID/state/socket files. These file paths are set on <code>puma.rb</code> and are expected to be defined as this on the init scripts.</p> <h2 id="_4-permissions-add-your-user-to-www-data-group"><a href="#_4-permissions-add-your-user-to-www-data-group" class="header-anchor">#</a> 4. Permissions: Add your user to <code>www-data</code> group</h2> <p>Add your user to the <code>www-data</code> group in order to write/read the project folder:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">usermod</span> -a -G www-data daniel
</code></pre></div><p>Replace <code>daniel</code> with the owner of the project files.</p> <p>Check your groups:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">id</span>
  <span class="token assign-left variable">uid</span><span class="token operator">=</span><span class="token number">1000</span><span class="token punctuation">(</span>daniel<span class="token punctuation">)</span> <span class="token assign-left variable">gid</span><span class="token operator">=</span><span class="token number">1000</span><span class="token punctuation">(</span>daniel<span class="token punctuation">)</span> <span class="token assign-left variable">groups</span><span class="token operator">=</span><span class="token number">1000</span><span class="token punctuation">(</span>daniel<span class="token punctuation">)</span>,4<span class="token punctuation">(</span>adm<span class="token punctuation">)</span>,24<span class="token punctuation">(</span>cdrom<span class="token punctuation">)</span>,27<span class="token punctuation">(</span>sudo<span class="token punctuation">)</span>,30<span class="token punctuation">(</span>dip<span class="token punctuation">)</span>,33<span class="token punctuation">(</span>www-data<span class="token punctuation">)</span>,46<span class="token punctuation">(</span>plugdev<span class="token punctuation">)</span>,118<span class="token punctuation">(</span>lpadmin<span class="token punctuation">)</span>,129<span class="token punctuation">(</span>sambashare<span class="token punctuation">)</span>,1001<span class="token punctuation">(</span>rvm<span class="token punctuation">)</span>
</code></pre></div><p><img src="data:image/png;base64,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" alt="return of linux command id"></p> <p>If <code>www-data</code> group <strong>doesn't appear</strong> for you, do a logout/login. Close/open shell won't work.</p> <h2 id="_5-permissions-set-group-permissions"><a href="#_5-permissions-set-group-permissions" class="header-anchor">#</a> 5. Permissions: Set group permissions</h2> <p>Set group ID on the directory - all new files and sub-directories created within the current directory inherit the group ID:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">chmod</span> g+s /var/www/site-1
<span class="token function">sudo</span> <span class="token function">find</span> /var/www/site-1 -type d -exec <span class="token function">chmod</span> <span class="token number">2775</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">\</span><span class="token punctuation">;</span>
</code></pre></div><p>Set write permissions to the group:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">chown</span> -R www-data:www-data /var/www/site-1
<span class="token function">sudo</span> <span class="token function">chmod</span> -R g+w /var/www/site-1
<span class="token function">sudo</span> <span class="token function">find</span> /var/www/site-1 -type f -exec <span class="token function">chmod</span> ug+rw <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">\</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="_6-download-init-scripts-jungle"><a href="#_6-download-init-scripts-jungle" class="header-anchor">#</a> 6. Download init scripts (<code>Jungle</code>)</h2> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> ~
<span class="token function">wget</span> https://raw.githubusercontent.com/puma/puma/master/tools/jungle/init.d/puma
<span class="token function">wget</span> https://raw.githubusercontent.com/puma/puma/master/tools/jungle/init.d/run-puma
</code></pre></div><h2 id="_7-install-init-scripts"><a href="#_7-install-init-scripts" class="header-anchor">#</a> 7. Install init scripts</h2> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># Copy the init script to services directory</span>
<span class="token function">sudo</span> <span class="token function">mv</span> puma /etc/init.d
<span class="token function">sudo</span> <span class="token function">chmod</span> +x /etc/init.d/puma

<span class="token comment"># Make it start at boot time.</span>
<span class="token function">sudo</span> update-rc.d -f puma defaults

<span class="token comment"># Move the Puma runner to an accessible location</span>
<span class="token function">sudo</span> <span class="token function">mv</span> run-puma /usr/local/bin
<span class="token function">sudo</span> <span class="token function">chmod</span> +x /usr/local/bin/run-puma

<span class="token comment"># Create an empty configuration file</span>
<span class="token function">sudo</span> <span class="token function">touch</span> /etc/puma.conf
</code></pre></div><h2 id="_8-set-which-projects-will-be-managed-by-jungle"><a href="#_8-set-which-projects-will-be-managed-by-jungle" class="header-anchor">#</a> 8. Set which projects will be managed by Jungle</h2> <div class="language-ini extra-class"><pre class="language-ini"><code><span class="token comment"># /etc/puma.conf</span>
/var/www/site-1,www-data
<span class="token comment">#/var/www/site-2,www-data</span>
<span class="token comment">#/var/www/site-3,www-data</span>
</code></pre></div><h2 id="_9-start-puma-jungle-service"><a href="#_9-start-puma-jungle-service" class="header-anchor">#</a> 9. Start Puma (Jungle) service</h2> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">service</span> puma restart
</code></pre></div><p>Check socket:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">ls</span> -lh /var/www/site-1/tmp/puma/puma.sock
</code></pre></div><p>If the file doesn't exist, check the logs (<code>./log/puma*</code>)</p> <h2 id="_10-test-if-service-can-be-stopped"><a href="#_10-test-if-service-can-be-stopped" class="header-anchor">#</a> 10. Test if service can be stopped</h2> <p>To be able to stop / restart the service, the <strong>root user</strong> must have Ruby and Puma installed:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> pumactl -v
</code></pre></div><p>If you see the &quot;<em>command not found</em>&quot; error, you need to install Puma for the root user:
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAS8AAAAfCAMAAACBDbvzAAAC+lBMVEUwCiQxCiT////NdT80CiQ3CiS69/owEWwwDD6Jw/r5rm5OmgY2U64wCinx9rp4FSQwDjtNlwjWgEgwCiLt9r59GiQ1TakwCzVNkQpMmgafPiet6fo1TKcxI3swDUpOlg3g+N8zPprG9ftJDCT2unowEGChQSiW0fvY5vXt+uBekOAwEEg7DCRHSR8wDR07bQf4+/yTzfv69e5kktwwCi8/LCL5+PPQ3vBoVHPrm17TfUemSC5NZxpJfwz8+vb2+uX2+d1nECQ1ECNJlgb8/Pyk3vz59Nj76KcwDURECyQxFxk2RxA1UAz///y17/zR+fqOqNrl0sVqh7xnWJvChXOGV0jEaDYwDiJCewhHkAaGwPnh6vboz7dqUG4wE2gwD1laOE2XUD2RTDliHyZMhhMxLxNKgwxAfwfx+PyBu/l/ksTu2cNpgbYyKYT6wYGwdGp4T12tVTYxIRfq/Pnl+/nK+Pnp8vn38OvE2Ov68OL88tLv3c789czjyLFleq1ITIlaSYaJYGVmSF5XPFuaSlVQMEXQeEOtXkM9HiRACyRFWhlGbRRCiQbB7vuMxvjc+e7z5tvx79quvtlumdlKcMVHYbbjuZw0NYWah39DRX2zd2w0JmXuoGHOjWBwSltqR1owD1afUTVHdwyq4PvS+fru8/iXtuWFndSbrdCFnsZpf7P7y576253uwZWfcW1oTGxhV2RlQVDXhEypZEqeUDRTHymJLydxFCQ/IyNAMiFDPiA1HSAxKBUzPhBBZg9Nig7Y3uvR1+Vwo+Xl+eR6od5xltngxNHn183x+Mz45MetmLjx87NvdLP52LBUXalzhZ5KWJ0zNpHwtnhvYXgxHm25gmPKjWKmZWIwEF2JVFjjkldCLEWhUTk7GSReDyQ5MhwzJBw4XQnx8O2t0ubn2uOevd/84NL637rhx55tT2p+cGddSGeTXFoyH1jkklfAdk15PzJCVBg/aQxwqPG5y+J4jJ/Mp5fot4+ZXlxJMkpIGihDCyQ4WAs4YglfZER3AAAFEklEQVRo3u1aZXBTQRDegxR7FJoGSIIFCO7uKZAWKAlubXBpS3F3p1CguLu7uxZ3d3d3d53h8mj2Eo4304RQAuSb/rjZt/vt7tdcmt0UIFituqrIJeQgW3y3e4BRXZzkHCovAOXpAcDgqxkEASTYV7MJIEAPFoviq8pgCtLn0gxyKBwYcgbKtwubQVGeBoHipmYjtU2a2Bh+ROpM6QfbWiakCyfKpq20EDdObJIq3WpZ1KGoDLLlSV8O/eLFT+AB/sNbadE5YaLE1J4ySdJ6Fb0JXEjhTeqXPqWF7zg5ohiIUDa1yYgFNxFUs020YYNJ0G0LFKwbFh/qgvRUECEkRJ4DLR5GzcZcap1JM8ixcGDYqhaC9DZ6zSxd4ZIMGOK97dsg7EiHcIIWz17LV4UdGVGTwNgS1WdUqxSb5M9Xovr0anPNhzKT61YuSXtmeh1c/nBBibbozPTyH370YoM+w6ho49qP79uvcA2atl7FZW3Eg2fWbufFww8wbDPJVbpNAMGBcrUqJAdYNQztAuWqIXoIMOrk8pDNQLFFtLTzjTC8Usl1Vx0Lt/19bSY2einHjKLNMaReVNuvQvez5QChbFEot0/3s1oAr6qZ/fJWmUXAq1eh3HmrrKWHFpkL1mkos9brXiGf5ms80JnpBVMW1s7def9AAp69R3fyG3luMJXpRJfcXadlB4Apd0PFgzOg+CIUvx4ZGQkxg4SHN4AjwPv4x6EobxIEevskHrv14hBw4/r1SHB9uIpebrjhRkzB/3gjAn8HsNQ/yCx+DganwWvlOqBIlS5WLEfefB0vFbPbwrP3m3mde663gzlm9UqbJjlQKD+G5YlZvTC7Lc5UfN+m3+nGrq4XgFctl9ArbZqMDjNnW0Rnggel6ERbRPbdI1uz2nn3daAHr8WFCvZsJAN+RlFW3RGat2cjwqImdCnY/FDm7lcInLkdSueP7CAOGT4jn8vqz4lFUWGqDPXiCdEZkyIhx0yz75znIw49WKoF+Ah5WPYoWCzh2CDrQpoZ68x68EODx4+0VjG7urWu26y9OLu2XmGeXcUZ+JnNDBx/yfTC88tkZFEJD/Tf26P/nqXXwH/lqrAFJTMCjOtAh9jTL4jn5WO7Bw4YsI6gXjwhOmNSJOSZafY2hef3WA9YKtLgI+Rh2aNgsXxCH9aFNDMGv14q3mMW07JjbMLtRtiOhX1opjuWzxhFh1j6k4wOsRR0yg+nS5L0Won7yBOiMyZFQp5ZzJ6qY01WKvLgI+Th7yNa0Ae7kGZGpJrT9V2N7FZ6JcuSHKIOGc2vv7KlJIYM8yNrvZIlSmoe+p8u2nHrTqg3aVmpJon2+xc6Y1Ik5JnF7BlSFGWlIg8+Qh5pvVguphfPzEHZZ2GnZY0hdZ6pMpQp2nphlPgSSEy7ilfr/hO6VPplvZCQY7Z05Y2lcnp526UXdiHNbNeuEq+Ps5aWPCE6Y1Ik5JmxKyyV1wt5WHbp+4hdSDLbtavEnaezlpY8ITpjUiTkmbErLJXXC3kwO68X+mAXUsx27Srxz7/TlpY8ITpjUiTkmbErLJXXC3kwO68X+mAXPLN7qRRtuJdw0YVbr/8asSwAN9x6wb+n1w1jgd8a/o/pJf4DxM/sRlUEAdsv7wVNdieE2//941+hVy4hyMPaEDxktvp7w4qtTeTbX+odCrcX2Zpl9uv8YIPr6wXtIgqQHyy+YsMKo3r2y1fqCOJIuH0QZyjzhs4V9PoGNntwOjeRt9QAAAAASUVORK5CYII=" alt="command not found"></p> <p>A quick fix is to run <code>sudo apt install puma</code>. This won't mess your rbenv/rvm.</p> <h2 id="_11-install-mod-proxy-and-mod-proxy-http"><a href="#_11-install-mod-proxy-and-mod-proxy-http" class="header-anchor">#</a> 11. Install <code>mod_proxy</code> and <code>mod_proxy_http</code></h2> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> a2enmod proxy
<span class="token function">sudo</span> a2enmod proxy_http
<span class="token function">sudo</span> <span class="token function">service</span> apache2 reload
</code></pre></div><h2 id="_12-edit-your-domain-1-configuration"><a href="#_12-edit-your-domain-1-configuration" class="header-anchor">#</a> 12. Edit your domain #1 configuration</h2> <p>File <code>/etc/apache2/sites-available/site-1.conf</code>:</p> <div class="language-apacheconf extra-class"><pre class="language-apacheconf"><code><span class="token directive-block tag"><span class="token directive-block tag"><span class="token punctuation">&lt;</span>VirtualHost</span><span class="token directive-block-parameter attr-value"> *<span class="token punctuation">:</span>80</span><span class="token punctuation">&gt;</span></span>
  <span class="token directive-inline property">ServerName</span> site-1.com
  <span class="token directive-inline property">ServerAlias</span> www.site-1.com
  <span class="token directive-inline property">DocumentRoot</span> /var/www/site-1/public

  <span class="token directive-block tag"><span class="token directive-block tag"><span class="token punctuation">&lt;</span>Location</span><span class="token directive-block-parameter attr-value"> /assets</span><span class="token punctuation">&gt;</span></span>
    <span class="token directive-inline property">ProxyPass</span> !
  <span class="token directive-block tag"><span class="token directive-block tag"><span class="token punctuation">&lt;/</span>Location</span><span class="token punctuation">&gt;</span></span>
  <span class="token directive-block tag"><span class="token directive-block tag"><span class="token punctuation">&lt;</span>Location</span><span class="token directive-block-parameter attr-value"> /system</span><span class="token punctuation">&gt;</span></span>
    <span class="token directive-inline property">ProxyPass</span> !
  <span class="token directive-block tag"><span class="token directive-block tag"><span class="token punctuation">&lt;/</span>Location</span><span class="token punctuation">&gt;</span></span>

  <span class="token directive-inline property">ProxyPass</span> / unix:///var/www/site-1/tmp/puma/puma.sock|http://localhost/
  <span class="token directive-inline property">ProxyPassReverse</span> / unix:///var/www/site-1/tmp/puma/puma.sock|http://localhost/
<span class="token directive-block tag"><span class="token directive-block tag"><span class="token punctuation">&lt;/</span>VirtualHost</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Notice that <code>ProxyPass</code> ignores <code>/assets</code> and <code>/system</code> folders, so they won't be processed by Ruby.</p> <h2 id="_13-enable-your-domain-1-and-restart-apache"><a href="#_13-enable-your-domain-1-and-restart-apache" class="header-anchor">#</a> 13. Enable your domain #1 and restart Apache</h2> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> a2ensite site-1

apachectl -t
  Syntax Ok

<span class="token function">sudo</span> /etc/init.d/apache2 restart
</code></pre></div><hr> <h2 id="optional-using-a-different-user-other-than-www-data-for-puma-processes"><a href="#optional-using-a-different-user-other-than-www-data-for-puma-processes" class="header-anchor">#</a> OPTIONAL: Using a different user other than <code>www-data</code> for Puma processes</h2> <p>As an example, let's create a <code>deploy</code> user for the Puma processes. We will also use a group with the same name, <code>deploy</code>.</p> <h3 id="all-commands-as-root-user"><a href="#all-commands-as-root-user" class="header-anchor">#</a> All commands as root user</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">su</span>
</code></pre></div><h3 id="create-the-user-group"><a href="#create-the-user-group" class="header-anchor">#</a> Create the user/group</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># create user deploy (password 102030)</span>
<span class="token function">useradd</span> -m deploy -p <span class="token number">102030</span>

<span class="token comment"># create group deploy</span>
<span class="token function">groupadd</span> deploy

<span class="token comment"># add user to the group</span>
<span class="token function">usermod</span> -a -G deploy deploy
</code></pre></div><h3 id="add-it-to-rvm-if-using-rvm"><a href="#add-it-to-rvm-if-using-rvm" class="header-anchor">#</a> Add it to RVM (if using RVM)</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>rvm group <span class="token function">add</span> rvm deploy
</code></pre></div><h3 id="change-folder-ownership"><a href="#change-folder-ownership" class="header-anchor">#</a> Change folder ownership</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">chown</span> -R deploy:deploy /var/www/site-1
</code></pre></div><h3 id="change-etc-puma-conf"><a href="#change-etc-puma-conf" class="header-anchor">#</a> Change <code>/etc/puma.conf</code></h3> <div class="language-ini extra-class"><pre class="language-ini"><code>/var/www/site-1,deploy
</code></pre></div><h3 id="reload-service"><a href="#reload-service" class="header-anchor">#</a> Reload service</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">service</span> puma restart
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>For extra security, set a different user for each Rails project.</p></div> <hr> <p>That's it. Now you can add another site just repeating the process.</p></div></div> <hr class="my-12" data-v-335698aa> <div data-v-335698aa><h2 class="text-xl md:text-3xl pb-10 text-center" data-v-335698aa>Comments</h2> <!----></div></div> <footer class="py-4 bg-gray-800" data-v-335698aa><p class="text-center text-gray-600 text-xs">Copyright 2022 - Daniel Loureiro</p></footer></div><div class="global-ui"><!----><!----><!----></div></div>
    <script src="/assets/js/app.5632ea00.js" defer></script><script src="/assets/js/3.9e1cc85f.js" defer></script><script src="/assets/js/23.45611473.js" defer></script><script src="/assets/js/22.2ffb8c95.js" defer></script>
  </body>
</html>
