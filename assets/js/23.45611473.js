(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{359:function(t,a){t.exports="data:image/png;base64,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"},360:function(t,a){t.exports="data:image/png;base64,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"},507:function(t,a,s){"use strict";s.r(a);var e=s(21),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("p",[t._v("Let's run a Rails server using Puma and Apache. We will use Apache's reverse proxy and Puma's Jungle service.\n")]),t._v(" "),e("h2",{attrs:{id:"passenger-vs-puma-vs-unicorn"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#passenger-vs-puma-vs-unicorn"}},[t._v("#")]),t._v(" Passenger vs Puma vs Unicorn")]),t._v(" "),e("p",[t._v("As for 2019, there are three main options to serve a Rails application:")]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("Phusion Passenger")])]),t._v(" "),e("li",[e("strong",[t._v("Puma")])]),t._v(" "),e("li",[e("strong",[t._v("Unicorn")])])]),t._v(" "),e("p",[e("strong",[t._v("Phusion Passenger")]),t._v(" is an Apache/Nginx module. It works just like mod_php (it is sometimes referred to "),e("code",[t._v("mod_rails")]),t._v("). Passenger is probably the most used solution in production environments.")]),t._v(" "),e("p",[e("strong",[t._v("Puma")]),t._v(" and "),e("strong",[t._v("Unicorn")]),t._v(", are stand-alone web servers. If you call them inside a Rails project root folder, they will listen to the port 80 (or any other you specify), wait for web connections, run the Rails code and answer to the browser – no need for Apache, Nginx, or anything else.")]),t._v(" "),e("p",[t._v("This tutorial shows how to run "),e("strong",[t._v("Puma with Apache")]),t._v(". The only way to do this is through a "),e("strong",[t._v("reverse proxy")]),t._v(", as there are no FastCGI or Apache/Nginx modules available.")]),t._v(" "),e("hr"),t._v(" "),e("h2",{attrs:{id:"_1-add-puma-to-gemfile"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-add-puma-to-gemfile"}},[t._v("#")]),t._v(" 1. Add puma to "),e("code",[t._v("Gemfile")])]),t._v(" "),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),e("p",[t._v("Ignore this entire step 1 for Rails 5+, as Puma is the default webserver.")])]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /var/www/site-1\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("nano")]),t._v(" Gemfile\n")])])]),e("div",{staticClass:"language-ruby extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ruby"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Gemfile")]),t._v("\nsource "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://rubygems.org'")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\ngem "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'puma'")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n")])])]),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("bundle "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v("\n")])])]),e("h2",{attrs:{id:"_2-create-replace-contents-of-puma-rb"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-create-replace-contents-of-puma-rb"}},[t._v("#")]),t._v(" 2. Create/replace contents of "),e("code",[t._v("puma.rb")])]),t._v(" "),e("p",[t._v("First, check how many CPU cores you have:")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" -c processor /proc/cpuinfo\n  "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n")])])]),e("p",[t._v("Set "),e("code",[t._v("./config/puma.rb")]),t._v(":")]),t._v(" "),e("div",{staticClass:"language-ruby extra-class"},[e("div",{staticClass:"highlight-lines"},[e("br"),e("br"),e("div",{staticClass:"highlighted"},[t._v(" ")]),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br")]),e("pre",{pre:!0,attrs:{class:"language-ruby"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# /var/www/site-1/config/puma.rb")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Change to match your CPU core count")]),t._v("\nworkers "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Min and Max threads per worker")]),t._v("\nthreads "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Project folder")]),t._v("\napp_dir "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("File")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("expand_path"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"../.."')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" __FILE__"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Default to production")]),t._v("\nrails_env "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ENV")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fetch"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"RAILS_ENV"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"production"')]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nenvironment rails_env\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Set up socket location")]),t._v("\nbind "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"unix://'),e("span",{pre:!0,attrs:{class:"token interpolation"}},[e("span",{pre:!0,attrs:{class:"token delimiter tag"}},[t._v("#{")]),t._v("app_dir"),e("span",{pre:!0,attrs:{class:"token delimiter tag"}},[t._v("}")])]),t._v('/tmp/puma/puma.sock"')]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Logs")]),t._v("\nstdout_redirect "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),e("span",{pre:!0,attrs:{class:"token interpolation"}},[e("span",{pre:!0,attrs:{class:"token delimiter tag"}},[t._v("#{")]),t._v("app_dir"),e("span",{pre:!0,attrs:{class:"token delimiter tag"}},[t._v("}")])]),t._v('/log/puma.stdout.log"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),e("span",{pre:!0,attrs:{class:"token interpolation"}},[e("span",{pre:!0,attrs:{class:"token delimiter tag"}},[t._v("#{")]),t._v("app_dir"),e("span",{pre:!0,attrs:{class:"token delimiter tag"}},[t._v("}")])]),t._v('/log/puma.stderr.log"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Set master PID and state locations")]),t._v("\npidfile "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),e("span",{pre:!0,attrs:{class:"token interpolation"}},[e("span",{pre:!0,attrs:{class:"token delimiter tag"}},[t._v("#{")]),t._v("app_dir"),e("span",{pre:!0,attrs:{class:"token delimiter tag"}},[t._v("}")])]),t._v('/tmp/puma/pid"')]),t._v("\nstate_path "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),e("span",{pre:!0,attrs:{class:"token interpolation"}},[e("span",{pre:!0,attrs:{class:"token delimiter tag"}},[t._v("#{")]),t._v("app_dir"),e("span",{pre:!0,attrs:{class:"token delimiter tag"}},[t._v("}")])]),t._v('/tmp/puma/state"')]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Establish db connection for new processes")]),t._v("\non_worker_boot "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("require")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"active_record"')]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ActiveSupport")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("on_load"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":active_record")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ActiveRecord")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Base")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("establish_connection"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("YAML")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("load_file"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),e("span",{pre:!0,attrs:{class:"token interpolation"}},[e("span",{pre:!0,attrs:{class:"token delimiter tag"}},[t._v("#{")]),t._v("app_dir"),e("span",{pre:!0,attrs:{class:"token delimiter tag"}},[t._v("}")])]),t._v('/config/database.yml"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("rails_env"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Allow puma to be restarted by `rails restart` command.")]),t._v("\nplugin "),e("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":tmp_restart")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Puma control rack application")]),t._v("\nactivate_control_app\n")])])]),e("p",[t._v("Adjust the number of workers according to the number of CPU cores of your server. This will maximize performance.")]),t._v(" "),e("h2",{attrs:{id:"_3-create-a-tmp-puma-folder"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-create-a-tmp-puma-folder"}},[t._v("#")]),t._v(" 3. Create a "),e("code",[t._v("./tmp/puma")]),t._v(" folder")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" -p ./tmp/puma\n")])])]),e("p",[t._v("This folder will contain the PID/state/socket files. These file paths are set on "),e("code",[t._v("puma.rb")]),t._v(" and are expected to be defined as this on the init scripts.")]),t._v(" "),e("h2",{attrs:{id:"_4-permissions-add-your-user-to-www-data-group"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-permissions-add-your-user-to-www-data-group"}},[t._v("#")]),t._v(" 4. Permissions: Add your user to "),e("code",[t._v("www-data")]),t._v(" group")]),t._v(" "),e("p",[t._v("Add your user to the "),e("code",[t._v("www-data")]),t._v(" group in order to write/read the project folder:")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("usermod")]),t._v(" -a -G www-data daniel\n")])])]),e("p",[t._v("Replace "),e("code",[t._v("daniel")]),t._v(" with the owner of the project files.")]),t._v(" "),e("p",[t._v("Check your groups:")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("id")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("uid")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("daniel"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("gid")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("daniel"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("groups")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("daniel"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(",4"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("adm"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(",24"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cdrom"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(",27"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sudo"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(",30"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dip"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(",33"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("www-data"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(",46"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("plugdev"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(",118"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("lpadmin"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(",129"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sambashare"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(",1001"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("rvm"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("p",[e("img",{attrs:{src:s(359),alt:"return of linux command id"}})]),t._v(" "),e("p",[t._v("If "),e("code",[t._v("www-data")]),t._v(" group "),e("strong",[t._v("doesn't appear")]),t._v(" for you, do a logout/login. Close/open shell won't work.")]),t._v(" "),e("h2",{attrs:{id:"_5-permissions-set-group-permissions"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-permissions-set-group-permissions"}},[t._v("#")]),t._v(" 5. Permissions: Set group permissions")]),t._v(" "),e("p",[t._v("Set group ID on the directory - all new files and sub-directories created within the current directory inherit the group ID:")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("chmod")]),t._v(" g+s /var/www/site-1\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("find")]),t._v(" /var/www/site-1 -type d -exec "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("chmod")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2775")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("p",[t._v("Set write permissions to the group:")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("chown")]),t._v(" -R www-data:www-data /var/www/site-1\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("chmod")]),t._v(" -R g+w /var/www/site-1\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("find")]),t._v(" /var/www/site-1 -type f -exec "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("chmod")]),t._v(" ug+rw "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("h2",{attrs:{id:"_6-download-init-scripts-jungle"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_6-download-init-scripts-jungle"}},[t._v("#")]),t._v(" 6. Download init scripts ("),e("code",[t._v("Jungle")]),t._v(")")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" ~\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" https://raw.githubusercontent.com/puma/puma/master/tools/jungle/init.d/puma\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" https://raw.githubusercontent.com/puma/puma/master/tools/jungle/init.d/run-puma\n")])])]),e("h2",{attrs:{id:"_7-install-init-scripts"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_7-install-init-scripts"}},[t._v("#")]),t._v(" 7. Install init scripts")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Copy the init script to services directory")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("mv")]),t._v(" puma /etc/init.d\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("chmod")]),t._v(" +x /etc/init.d/puma\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Make it start at boot time.")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" update-rc.d -f puma defaults\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Move the Puma runner to an accessible location")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("mv")]),t._v(" run-puma /usr/local/bin\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("chmod")]),t._v(" +x /usr/local/bin/run-puma\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Create an empty configuration file")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("touch")]),t._v(" /etc/puma.conf\n")])])]),e("h2",{attrs:{id:"_8-set-which-projects-will-be-managed-by-jungle"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_8-set-which-projects-will-be-managed-by-jungle"}},[t._v("#")]),t._v(" 8. Set which projects will be managed by Jungle")]),t._v(" "),e("div",{staticClass:"language-ini extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ini"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# /etc/puma.conf")]),t._v("\n/var/www/site-1,www-data\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#/var/www/site-2,www-data")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#/var/www/site-3,www-data")]),t._v("\n")])])]),e("h2",{attrs:{id:"_9-start-puma-jungle-service"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_9-start-puma-jungle-service"}},[t._v("#")]),t._v(" 9. Start Puma (Jungle) service")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("service")]),t._v(" puma restart\n")])])]),e("p",[t._v("Check socket:")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v(" -lh /var/www/site-1/tmp/puma/puma.sock\n")])])]),e("p",[t._v("If the file doesn't exist, check the logs ("),e("code",[t._v("./log/puma*")]),t._v(")")]),t._v(" "),e("h2",{attrs:{id:"_10-test-if-service-can-be-stopped"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_10-test-if-service-can-be-stopped"}},[t._v("#")]),t._v(" 10. Test if service can be stopped")]),t._v(" "),e("p",[t._v("To be able to stop / restart the service, the "),e("strong",[t._v("root user")]),t._v(" must have Ruby and Puma installed:")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" pumactl -v\n")])])]),e("p",[t._v('If you see the "'),e("em",[t._v("command not found")]),t._v('" error, you need to install Puma for the root user:\n'),e("img",{attrs:{src:s(360),alt:"command not found"}})]),t._v(" "),e("p",[t._v("A quick fix is to run "),e("code",[t._v("sudo apt install puma")]),t._v(". This won't mess your rbenv/rvm.")]),t._v(" "),e("h2",{attrs:{id:"_11-install-mod-proxy-and-mod-proxy-http"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_11-install-mod-proxy-and-mod-proxy-http"}},[t._v("#")]),t._v(" 11. Install "),e("code",[t._v("mod_proxy")]),t._v(" and "),e("code",[t._v("mod_proxy_http")])]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" a2enmod proxy\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" a2enmod proxy_http\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("service")]),t._v(" apache2 reload\n")])])]),e("h2",{attrs:{id:"_12-edit-your-domain-1-configuration"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_12-edit-your-domain-1-configuration"}},[t._v("#")]),t._v(" 12. Edit your domain #1 configuration")]),t._v(" "),e("p",[t._v("File "),e("code",[t._v("/etc/apache2/sites-available/site-1.conf")]),t._v(":")]),t._v(" "),e("div",{staticClass:"language-apacheconf extra-class"},[e("pre",{pre:!0,attrs:{class:"language-apacheconf"}},[e("code",[e("span",{pre:!0,attrs:{class:"token directive-block tag"}},[e("span",{pre:!0,attrs:{class:"token directive-block tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("VirtualHost")]),e("span",{pre:!0,attrs:{class:"token directive-block-parameter attr-value"}},[t._v(" *"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("80")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token directive-inline property"}},[t._v("ServerName")]),t._v(" site-1.com\n  "),e("span",{pre:!0,attrs:{class:"token directive-inline property"}},[t._v("ServerAlias")]),t._v(" www.site-1.com\n  "),e("span",{pre:!0,attrs:{class:"token directive-inline property"}},[t._v("DocumentRoot")]),t._v(" /var/www/site-1/public\n\n  "),e("span",{pre:!0,attrs:{class:"token directive-block tag"}},[e("span",{pre:!0,attrs:{class:"token directive-block tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("Location")]),e("span",{pre:!0,attrs:{class:"token directive-block-parameter attr-value"}},[t._v(" /assets")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token directive-inline property"}},[t._v("ProxyPass")]),t._v(" !\n  "),e("span",{pre:!0,attrs:{class:"token directive-block tag"}},[e("span",{pre:!0,attrs:{class:"token directive-block tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("Location")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token directive-block tag"}},[e("span",{pre:!0,attrs:{class:"token directive-block tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("Location")]),e("span",{pre:!0,attrs:{class:"token directive-block-parameter attr-value"}},[t._v(" /system")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token directive-inline property"}},[t._v("ProxyPass")]),t._v(" !\n  "),e("span",{pre:!0,attrs:{class:"token directive-block tag"}},[e("span",{pre:!0,attrs:{class:"token directive-block tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("Location")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n  "),e("span",{pre:!0,attrs:{class:"token directive-inline property"}},[t._v("ProxyPass")]),t._v(" / unix:///var/www/site-1/tmp/puma/puma.sock|http://localhost/\n  "),e("span",{pre:!0,attrs:{class:"token directive-inline property"}},[t._v("ProxyPassReverse")]),t._v(" / unix:///var/www/site-1/tmp/puma/puma.sock|http://localhost/\n"),e("span",{pre:!0,attrs:{class:"token directive-block tag"}},[e("span",{pre:!0,attrs:{class:"token directive-block tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("VirtualHost")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),e("p",[t._v("Notice that "),e("code",[t._v("ProxyPass")]),t._v(" ignores "),e("code",[t._v("/assets")]),t._v(" and "),e("code",[t._v("/system")]),t._v(" folders, so they won't be processed by Ruby.")]),t._v(" "),e("h2",{attrs:{id:"_13-enable-your-domain-1-and-restart-apache"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_13-enable-your-domain-1-and-restart-apache"}},[t._v("#")]),t._v(" 13. Enable your domain #1 and restart Apache")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" a2ensite site-1\n\napachectl -t\n  Syntax Ok\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" /etc/init.d/apache2 restart\n")])])]),e("hr"),t._v(" "),e("h2",{attrs:{id:"optional-using-a-different-user-other-than-www-data-for-puma-processes"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#optional-using-a-different-user-other-than-www-data-for-puma-processes"}},[t._v("#")]),t._v(" OPTIONAL: Using a different user other than "),e("code",[t._v("www-data")]),t._v(" for Puma processes")]),t._v(" "),e("p",[t._v("As an example, let's create a "),e("code",[t._v("deploy")]),t._v(" user for the Puma processes. We will also use a group with the same name, "),e("code",[t._v("deploy")]),t._v(".")]),t._v(" "),e("h3",{attrs:{id:"all-commands-as-root-user"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#all-commands-as-root-user"}},[t._v("#")]),t._v(" All commands as root user")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("su")]),t._v("\n")])])]),e("h3",{attrs:{id:"create-the-user-group"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#create-the-user-group"}},[t._v("#")]),t._v(" Create the user/group")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# create user deploy (password 102030)")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("useradd")]),t._v(" -m deploy -p "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("102030")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# create group deploy")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("groupadd")]),t._v(" deploy\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# add user to the group")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("usermod")]),t._v(" -a -G deploy deploy\n")])])]),e("h3",{attrs:{id:"add-it-to-rvm-if-using-rvm"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#add-it-to-rvm-if-using-rvm"}},[t._v("#")]),t._v(" Add it to RVM (if using RVM)")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("rvm group "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" rvm deploy\n")])])]),e("h3",{attrs:{id:"change-folder-ownership"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#change-folder-ownership"}},[t._v("#")]),t._v(" Change folder ownership")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("chown")]),t._v(" -R deploy:deploy /var/www/site-1\n")])])]),e("h3",{attrs:{id:"change-etc-puma-conf"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#change-etc-puma-conf"}},[t._v("#")]),t._v(" Change "),e("code",[t._v("/etc/puma.conf")])]),t._v(" "),e("div",{staticClass:"language-ini extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ini"}},[e("code",[t._v("/var/www/site-1,deploy\n")])])]),e("h3",{attrs:{id:"reload-service"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#reload-service"}},[t._v("#")]),t._v(" Reload service")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("service")]),t._v(" puma restart\n")])])]),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("For extra security, set a different user for each Rails project.")])]),t._v(" "),e("hr"),t._v(" "),e("p",[t._v("That's it. Now you can add another site just repeating the process.")])])}),[],!1,null,null,null);a.default=n.exports}}]);