(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{368:function(t,a,s){t.exports=s.p+"assets/img/1-300x225.795caeab.jpg"},369:function(t,a,s){t.exports=s.p+"assets/img/lwd-dragonfly-server-1.25b18edb.png"},370:function(t,a){t.exports="data:image/png;base64,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"},371:function(t,a,s){t.exports=s.p+"assets/img/optimised.a200c040.gif"},512:function(t,a,s){"use strict";s.r(a);var e=s(21),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("p",[t._v("Let's say you want to add a "),e("strong",[t._v("picture field")]),t._v(" to your "),e("strong",[t._v("product model")]),t._v(". How do you do it?")]),t._v(" "),e("p",[t._v("Unfortunately, Rails' Active Record doesn't provide a native way to work with binary fields, like pictures. We can easily add a string field, but we can't add a file field.\n")]),t._v(" "),e("p",[t._v("Dragonfly is a gem that extends ActiveRecord, allowing to have binary fields, like videos, files, or... pictures. It's a good, or even better, alternative to the famous Paperclip gem.")]),t._v(" "),e("hr"),t._v(" "),e("h2",{attrs:{id:"before-we-start"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#before-we-start"}},[t._v("#")]),t._v(" Before we start")]),t._v(" "),e("p",[t._v("Let's create an example app with these commands:")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("rails new test_df\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" test_df\nrails g scaffold product title\nrake db:migrate\nrails s\n")])])]),e("h2",{attrs:{id:"installation"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#installation"}},[t._v("#")]),t._v(" Installation")]),t._v(" "),e("h3",{attrs:{id:"_1-declare-dragonfly-gem-on-gemfile"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-declare-dragonfly-gem-on-gemfile"}},[t._v("#")]),t._v(" 1. Declare DragonFly gem on Gemfile")]),t._v(" "),e("div",{staticClass:"language-ruby extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ruby"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Gemfile")]),t._v("\ngem "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'dragonfly'")]),t._v("\n")])])]),e("h3",{attrs:{id:"_2-install-it"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-install-it"}},[t._v("#")]),t._v(" 2. Install it")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("bundle "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v("\n")])])]),e("h3",{attrs:{id:"_3-generate-the-initializer-file"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-generate-the-initializer-file"}},[t._v("#")]),t._v(" 3. Generate the initializer file")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("rails g dragonfly\n")])])]),e("p",[t._v("This command generates a "),e("code",[t._v("config/initializers/dragonfly.rb")]),t._v(" file, which can be used to configure DragonFly's core settings.")]),t._v(" "),e("h2",{attrs:{id:"creating-an-image-field"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#creating-an-image-field"}},[t._v("#")]),t._v(" Creating an image field")]),t._v(" "),e("p",[t._v("To add a normal string field like "),e("code",[t._v("color")]),t._v(", we create a migration like this:")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("rails g migration add_field_to_product color\n")])])]),e("p",[t._v("That's how we create a "),e("code",[t._v("color")]),t._v(" string field. To create a Dragonfly field, you need to add an "),e("code",[t._v("_uid")]),t._v(" at the end of the name. So, in this example, the name would be "),e("code",[t._v("color_uid")]),t._v(". If the name is "),e("code",[t._v("photo")]),t._v(", that would be "),e("code",[t._v("photo_uid")]),t._v(".")]),t._v(" "),e("p",[t._v("Let's use "),e("code",[t._v("image")]),t._v(" as the field name:")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("rails g migration add_field_to_product image_uid\n")])])]),e("p",[t._v("Commit the changes with "),e("code",[t._v("rake db:migrate")]),t._v(":")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("rake db:migrate\n")])])]),e("p",[t._v("Now open the "),e("code",[t._v("product")]),t._v(" model and let Rails know this field isn't a string, but a file:")]),t._v(" "),e("div",{staticClass:"language-ruby extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ruby"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# app/model/product.rb")]),t._v("\ndragonfly_accessor "),e("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":image")]),t._v("\n")])])]),e("h2",{attrs:{id:"saving-a-file-to-a-record"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#saving-a-file-to-a-record"}},[t._v("#")]),t._v(" Saving a file to a record")]),t._v(" "),e("h3",{attrs:{id:"_1-for-our-test-save-this-image-in-your-images-folder-as-1-jpg"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-for-our-test-save-this-image-in-your-images-folder-as-1-jpg"}},[t._v("#")]),t._v(" 1. For our test, save this image in your "),e("code",[t._v("Images")]),t._v(" folder as "),e("code",[t._v("1.jpg")])]),t._v(" "),e("p",[e("img",{attrs:{src:s(368),alt:"Oranges"}})]),t._v(" "),e("h3",{attrs:{id:"_2-open-the-rails-console"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-open-the-rails-console"}},[t._v("#")]),t._v(" 2. Open the rails console")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("rails c\n")])])]),e("h3",{attrs:{id:"_3-load-the-image-file-get-a-record-put-the-image-on-it-and-save-it"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-load-the-image-file-get-a-record-put-the-image-on-it-and-save-it"}},[t._v("#")]),t._v(" 3. Load the image file, get a record, put the image on it, and save it")]),t._v(" "),e("div",{staticClass:"language-ruby extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ruby"}},[e("code",[e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" i "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" open"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../../Images/1.jpg'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" p "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Product")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("last\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" p"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("image "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" i\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" p"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("save"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("\n")])])]),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),e("p",[t._v("We are using "),e("code",[t._v("../../Images")]),t._v(", because my project is at "),e("code",[t._v("~/projects/test-dragonfly")]),t._v(", i.e., 2 folders from "),e("code",[t._v("~/Images")]),t._v(". Change it at your will.")])]),t._v(" "),e("h3",{attrs:{id:"_4-close-the-console-and-re-open-it-again-to-make-sure-the-image-has-been-saved"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-close-the-console-and-re-open-it-again-to-make-sure-the-image-has-been-saved"}},[t._v("#")]),t._v(" 4. Close the console and re-open it again to make sure the image has been saved")]),t._v(" "),e("div",{staticClass:"language-ruby extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ruby"}},[e("code",[e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" quit\n\nrails c\n\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" p "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Product")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("last\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" p"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("image\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# => <Dragonfly Attachment uid="2015/09/26/4ad07k6hin_1.jpg", app=:default>')]),t._v("\n")])])]),e("p",[t._v("If "),e("code",[t._v("p.image")]),t._v(" isn't nil, it has been saved.")]),t._v(" "),e("h2",{attrs:{id:"retrieving"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#retrieving"}},[t._v("#")]),t._v(" Retrieving")]),t._v(" "),e("h3",{attrs:{id:"_1-to-get-the-file-path-use-the-url-method"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-to-get-the-file-path-use-the-url-method"}},[t._v("#")]),t._v(" 1. To get the file path, use the "),e("code",[t._v("url")]),t._v(" method")]),t._v(" "),e("div",{staticClass:"language-ruby extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ruby"}},[e("code",[e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" p"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("image"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("url\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# => "/media/W1siZiIsIjIwMTUvMDkvMjYvNGFkMDdrNmhpbl8xLmpwZyJdXQ?sha=0d7af674c4891620"')]),t._v("\n")])])]),e("h3",{attrs:{id:"_2-copy-and-paste-the-result-on-the-browser-and-you-will-see-the-file"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-copy-and-paste-the-result-on-the-browser-and-you-will-see-the-file"}},[t._v("#")]),t._v(" 2. Copy and paste the result on the browser and you will see the file")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("http://localhost:3000/media/W1siZiIsIjIwMTUvMDkvMjYvNGFkMDdrNmhpbl8xLmpwZyJdXQ?sha"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("0d7af674c4891620\n")])])]),e("h3",{attrs:{id:"_3-for-images-we-can-use-the-thumb-method-it-generates-a-new-version-with-different-geometries"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-for-images-we-can-use-the-thumb-method-it-generates-a-new-version-with-different-geometries"}},[t._v("#")]),t._v(" 3. For images, we can use the "),e("code",[t._v("thumb")]),t._v(" method. It generates a new version with different geometries")]),t._v(" "),e("div",{staticClass:"language-ruby extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ruby"}},[e("code",[e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" p"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("image"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("thumb"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'80x60'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("url\n "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/media/W1siZiIsIjIwMTUvMDkvMjcvOGNiNHFmbTU0M18xLmpwZyJdLFsicCIsInRodW1iIiwiODB4NjAiXV0?sha=1931e3387c6b54f5"')]),t._v("\n")])])]),e("h3",{attrs:{id:"_4-copy-and-paste-the-result-on-the-browser-and-see-the-same-image-with-the-new-dimensions"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-copy-and-paste-the-result-on-the-browser-and-see-the-same-image-with-the-new-dimensions"}},[t._v("#")]),t._v(" 4. Copy and paste the result on the browser and see the same image with the new dimensions")]),t._v(" "),e("hr"),t._v(" "),e("h2",{attrs:{id:"dragonfly-is-on-the-fly"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#dragonfly-is-on-the-fly"}},[t._v("#")]),t._v(" Dragonfly is on-the-fly")]),t._v(" "),e("p",[t._v("In the rails server window, we can see the logs showing that DragonFly is generating the file on the fly:")]),t._v(" "),e("p",[e("img",{attrs:{src:s(369),alt:"Rails server logs"}})]),t._v(" "),e("p",[t._v("Whenever someone loads the thumb image on a browser, Dragonfly gets the original image and converts it, generating a new image.")]),t._v(" "),e("p",[t._v("To see this process happening, just reload the image on the browser and check the logs.")]),t._v(" "),e("p",[t._v("That's why DragonFly has this name – it's on-the-fly, like a Dragonfly 😃")]),t._v(" "),e("hr"),t._v(" "),e("h2",{attrs:{id:"displaying-on-index-html-and-show-html"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#displaying-on-index-html-and-show-html"}},[t._v("#")]),t._v(" Displaying on "),e("code",[t._v("index.html")]),t._v(" and "),e("code",[t._v("show.html")])]),t._v(" "),e("p",[t._v("Now, let's show these images as thumbs in our product index page.")]),t._v(" "),e("h3",{attrs:{id:"_1-open-index-html-erb-and-create-a-thumb-column"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-open-index-html-erb-and-create-a-thumb-column"}},[t._v("#")]),t._v(" 1. Open "),e("code",[t._v("index.html.erb")]),t._v(" and create a "),e("code",[t._v("thumb")]),t._v(" column")]),t._v(" "),e("p",[t._v("Use "),e("code",[t._v("image_tag()")]),t._v(" to generate an HTML image tag and the "),e("code",[t._v("thumb()")]),t._v(" method to generate a smaller version of the image.")]),t._v(" "),e("p",[t._v("Simplified example:")]),t._v(" "),e("div",{staticClass:"language-erb extra-class"},[e("pre",{pre:!0,attrs:{class:"language-erb"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- apps/views/products/index.html.erb --\x3e")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("table")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("tr")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("th")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Title"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("th")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("th")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Thumb"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("th")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("tr")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token erb language-erb"}},[e("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@products")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("each")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("product"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("tr")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("td")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),e("span",{pre:!0,attrs:{class:"token erb language-erb"}},[e("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%=")]),t._v(" product"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),e("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("td")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("td")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),e("span",{pre:!0,attrs:{class:"token erb language-erb"}},[e("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%=")]),t._v(" image_tag product"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("image"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("thumb"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'80x60'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("url "),e("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("td")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("tr")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token erb language-erb"}},[e("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("table")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),e("p",[t._v("Result:\n"),e("img",{attrs:{src:s(370),alt:"Product list on browser"}})]),t._v(" "),e("h3",{attrs:{id:"_2-do-the-same-for-show-html-erb"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-do-the-same-for-show-html-erb"}},[t._v("#")]),t._v(" 2. Do the same for "),e("code",[t._v("show.html.erb")])]),t._v(" "),e("div",{staticClass:"language-erb extra-class"},[e("pre",{pre:!0,attrs:{class:"language-erb"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- apps/views/products/show.html.erb --\x3e")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("p")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("strong")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Image:"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("strong")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token erb language-erb"}},[e("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@product")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("image"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("url "),e("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("p")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),e("h3",{attrs:{id:"_3-check-if-the-image-exists"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-check-if-the-image-exists"}},[t._v("#")]),t._v(" 3. Check if the image exists")]),t._v(" "),e("p",[t._v("If you run the above code you are going to get an exception. That's because you have some records without any image attached, and you're calling "),e("code",[t._v("thumb")]),t._v("/"),e("code",[t._v("url")]),t._v(" methods from a "),e("code",[t._v("nil")]),t._v(" value.")]),t._v(" "),e("p",[t._v("To check if the field has an attached file or not, use Rail's core "),e("code",[t._v("nil?")]),t._v(" method or use the "),e("code",[t._v("_stored?")]),t._v(" method:")]),t._v(" "),e("div",{staticClass:"language-erb extra-class"},[e("pre",{pre:!0,attrs:{class:"language-erb"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- apps/views/products/show.html.erb --\x3e")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token erb language-erb"}},[e("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%=")]),t._v(" product"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("image_stored"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" image_tag"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("product"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("image"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("thumb"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'80x60'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("url"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v(" "),e("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),t._v("\n")])])]),e("p",[t._v("OR")]),t._v(" "),e("div",{staticClass:"language-erb extra-class"},[e("pre",{pre:!0,attrs:{class:"language-erb"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- apps/views/products/show.html.erb --\x3e")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token erb language-erb"}},[e("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%=")]),t._v(" product"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("image"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("nil")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" image_tag"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("product"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("image"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("thumb"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'80x60'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("url"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v(" "),e("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),t._v("\n")])])]),e("h2",{attrs:{id:"using-it-on-forms"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#using-it-on-forms"}},[t._v("#")]),t._v(" Using it on forms")]),t._v(" "),e("p",[t._v("We've added images using the console. But how to save the image through a form?")]),t._v(" "),e("p",[t._v("With DragonFly, we can do it in the same way that we would do with a normal field.")]),t._v(" "),e("h3",{attrs:{id:"_1-open-form-html-erb-create-a-new-html-field-with-the-corresponding-name-and-use-the-file-field-method-to-generate-a-html-file-field"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-open-form-html-erb-create-a-new-html-field-with-the-corresponding-name-and-use-the-file-field-method-to-generate-a-html-file-field"}},[t._v("#")]),t._v(" 1. Open "),e("code",[t._v("_form.html.erb")]),t._v(", create a new HTML field with the corresponding name, and use the "),e("code",[t._v("file_field")]),t._v(" method to generate a HTML file field")]),t._v(" "),e("div",{staticClass:"language-erb extra-class"},[e("pre",{pre:!0,attrs:{class:"language-erb"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- app/views/products/_form.html.erb --\x3e")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token erb language-erb"}},[e("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%=")]),t._v(" form_for"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@product")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("f"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("field"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token erb language-erb"}},[e("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%=")]),t._v(" f"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("label "),e("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":title")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("br")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token erb language-erb"}},[e("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%=")]),t._v(" f"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("text_field "),e("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":title")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("field"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token erb language-erb"}},[e("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%=")]),t._v(" f"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("label "),e("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":image")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("br")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token erb language-erb"}},[e("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%=")]),t._v(" f"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("file_field "),e("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":image")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("actions"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token erb language-erb"}},[e("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%=")]),t._v(" f"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("submit "),e("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token erb language-erb"}},[e("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),t._v("\n")])])]),e("h3",{attrs:{id:"_2-like-other-fields-we-must-allow-it-in-strong-parameters"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-like-other-fields-we-must-allow-it-in-strong-parameters"}},[t._v("#")]),t._v(" 2. Like other fields, we must allow it in strong parameters")]),t._v(" "),e("div",{staticClass:"language-ruby extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ruby"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# app/controllers/products_controller.rb")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token method-definition"}},[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("product_params")])]),t._v("\n  params"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":product")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("permit"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":title")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":image")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n")])])]),e("p",[t._v("Now we can send and save an image using the form:\n"),e("img",{attrs:{src:s(371),alt:"Image upload on browser"}})]),t._v(" "),e("h2",{attrs:{id:"performance-with-cache"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#performance-with-cache"}},[t._v("#")]),t._v(" Performance with cache")]),t._v(" "),e("p",[t._v("As DragonFly gem generates new versions on the fly, it can be very resource-consuming, so we need to use a server cache solution.")]),t._v(" "),e("p",[t._v("Let's add the "),e("code",[t._v("rack-cache gem")]),t._v(".")]),t._v(" "),e("h3",{attrs:{id:"_1-add-it-to-gemfile"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-add-it-to-gemfile"}},[t._v("#")]),t._v(" 1. Add it to "),e("code",[t._v("Gemfile")])]),t._v(" "),e("div",{staticClass:"language-ruby extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ruby"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Gemfile")]),t._v("\ngem "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'rack-cache'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'rack/cache'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" group"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":production")]),t._v("\n")])])]),e("h3",{attrs:{id:"_2-install-it-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-install-it-2"}},[t._v("#")]),t._v(" 2. Install it")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("bundle "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v("\n")])])]),e("h3",{attrs:{id:"_3-enable-it-on-production"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-enable-it-on-production"}},[t._v("#")]),t._v(" 3. Enable it on production")]),t._v(" "),e("div",{staticClass:"language-ruby extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ruby"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# config/environments/production.rb")]),t._v("\nconfig"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("action_dispatch"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("rack_cache "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n")])])]),e("h3",{attrs:{id:"_4-set-the-cache-s-temporary-folder"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-set-the-cache-s-temporary-folder"}},[t._v("#")]),t._v(" 4. Set the cache's temporary folder")]),t._v(" "),e("div",{staticClass:"language-ruby extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ruby"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# config/application.rb")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Application")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Rails")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Application")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("defined")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Rack")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Cache")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    config"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("middleware"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("delete"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Rack")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Cache")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    config"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("middleware"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("insert "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Rack")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Cache")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":verbose")]),t._v("     "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# log verbosity")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":metastore")]),t._v("   "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("URI")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("encode"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"file:'),e("span",{pre:!0,attrs:{class:"token interpolation"}},[e("span",{pre:!0,attrs:{class:"token delimiter tag"}},[t._v("#{")]),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Rails")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("root"),e("span",{pre:!0,attrs:{class:"token delimiter tag"}},[t._v("}")])]),t._v('/tmp/dragonfly/cache/meta"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# URI encoded in case of spaces")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":entitystore")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("URI")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("encode"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"file:'),e("span",{pre:!0,attrs:{class:"token interpolation"}},[e("span",{pre:!0,attrs:{class:"token delimiter tag"}},[t._v("#{")]),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Rails")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("root"),e("span",{pre:!0,attrs:{class:"token delimiter tag"}},[t._v("}")])]),t._v('/tmp/dragonfly/cache/body"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n")])])]),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("You don't need to do this if you already use a server cache solution like "),e("strong",[t._v("Varnish")]),t._v(".")])]),t._v(" "),e("h2",{attrs:{id:"validation"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#validation"}},[t._v("#")]),t._v(" Validation")]),t._v(" "),e("p",[t._v("Use "),e("code",[t._v("validates_property")]),t._v(" method on the model to validate properties. Examples:")]),t._v(" "),e("div",{staticClass:"language-ruby extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ruby"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# app/models/product.rb")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Product")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ActiveRecord")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Base")]),t._v("\n  dragonfly_accessor "),e("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":image")]),t._v("\n\n  validates_property "),e("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":width")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" of"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":image")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v(".400")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  validates_property "),e("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":mime_type")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" of"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":image")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("%w(image/jpeg image/png)")]),t._v("\n  validates_property "),e("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":size")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" of"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":image")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" maximum"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("500.")]),t._v("kilobytes\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n")])])]),e("p",[t._v("As an example, let's say you want to validate if the attachment is an image or something else. With this you can make sure your users aren't uploading movies or applications:")]),t._v(" "),e("div",{staticClass:"language-ruby extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ruby"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# app/models/product.rb")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Product")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ActiveRecord")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Base")]),t._v("\n  dragonfly_accessor "),e("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":image")]),t._v("\n\n  validates_property "),e("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":mime_type")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" of"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":image")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("%w(image)")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n")])])]),e("p",[t._v("See a full list of validations here:\n"),e("a",{attrs:{href:"https://markevans.github.io/dragonfly/models#validations",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://markevans.github.io/dragonfly/models#validations"),e("OutboundLink")],1)]),t._v(" "),e("h2",{attrs:{id:"s3-dropbox-watermarks-and-more"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#s3-dropbox-watermarks-and-more"}},[t._v("#")]),t._v(" S3, Dropbox, Watermarks and More")]),t._v(" "),e("p",[t._v("This concludes our basic DragonFly gem tutorial, but DragonFly has also many advanced features: you can use Amazon S3, Dropbox, and other providers as your storage. You can change the image on-the-fly in so many ways: add a watermark, change to black and white, change the file format, and so on. You can also create your own plugins to extend DragonFly.")]),t._v(" "),e("p",[t._v("You can also work with other binary types like movies or apps, but I won't cover these things here. Maybe on other tutorial 😉")]),t._v(" "),e("h2",{attrs:{id:"common-problems"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#common-problems"}},[t._v("#")]),t._v(" Common problems")]),t._v(" "),e("ul",[e("li",[e("strong",[t._v('"404 - Not Found:')]),t._v(" If you get this error, you probably don't have "),e("code",[t._v("ImageMagick")]),t._v(" installed. On Ubuntu, run a "),e("code",[t._v("sudo apt-get install imagemagick")]),t._v(" to fix it.")])]),t._v(" "),e("h2",{attrs:{id:"more-info"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#more-info"}},[t._v("#")]),t._v(" More info")]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("DragonFly gem:")]),t._v(" "),e("a",{attrs:{href:"https://markevans.github.io/dragonfly/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://markevans.github.io/dragonfly/"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("strong",[t._v("On GitHub:")]),t._v(" "),e("a",{attrs:{href:"https://github.com/markevans/dragonfly",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/markevans/dragonfly"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("strong",[t._v("DragonFly author:")]),t._v(" Mark Evans")])])])}),[],!1,null,null,null);a.default=n.exports}}]);