(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{380:function(s,t){s.exports="data:image/png;base64,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"},519:function(s,t,a){"use strict";a.r(t);var e=a(21),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("p",[s._v("For security reasons, you shouldn't run all your NGINX virtual hosts with the same user.")]),s._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),e("p",[s._v("See "),e("strong",[s._v("why")]),s._v(" it's a bad practice to run all sites on the same user at the "),e("a",{attrs:{href:"#why-to-use-multiple-users-security-reasons"}},[s._v("end of this article")]),s._v(".")])]),s._v(" "),e("p",[s._v("Considering that you are using PHP-FPM (you probably are, as it is the most usual), you can create a spool, owned by a different user, for each domain.")]),s._v(" "),e("h2",{attrs:{id:"_1-create-spools"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-create-spools"}},[s._v("#")]),s._v(" 1. Create spools")]),s._v(" "),e("p",[s._v("Add the spools to "),e("code",[s._v("/etc/php/{php-version}/fpm/pool.d/www.conf")]),s._v(" or create a new "),e("code",[s._v(".conf")]),s._v(" file for each new spool.")]),s._v(" "),e("h3",{attrs:{id:"spool-1-myuser1-mygroup1"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#spool-1-myuser1-mygroup1"}},[s._v("#")]),s._v(" Spool #1 (myuser1/mygroup1)")]),s._v(" "),e("div",{staticClass:"language-ini extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ini"}},[e("code",[e("span",{pre:!0,attrs:{class:"token selector"}},[s._v("[myprojectuser1]")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token constant"}},[s._v("user")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" myuser1")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token constant"}},[s._v("group")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" mygroup1")]),s._v("\n..\n"),e("span",{pre:!0,attrs:{class:"token constant"}},[s._v("listen")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" /run/php/myuser1.sock")]),s._v("\n...\n"),e("span",{pre:!0,attrs:{class:"token constant"}},[s._v("listen.owner")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" www-data")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token constant"}},[s._v("listen.group")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" www-data")]),s._v("\n")])])]),e("h3",{attrs:{id:"spool-2-myuser2-mygroup2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#spool-2-myuser2-mygroup2"}},[s._v("#")]),s._v(" Spool #2 (myuser2/mygroup2)")]),s._v(" "),e("div",{staticClass:"language-ini extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ini"}},[e("code",[e("span",{pre:!0,attrs:{class:"token selector"}},[s._v("[myprojectuser2]")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token constant"}},[s._v("user")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" myuser2")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token constant"}},[s._v("group")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" mygroup2")]),s._v("\n..\n"),e("span",{pre:!0,attrs:{class:"token constant"}},[s._v("listen")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" /run/php/myuser2.sock")]),s._v("\n...\n"),e("span",{pre:!0,attrs:{class:"token constant"}},[s._v("listen.owner")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" www-data")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token constant"}},[s._v("listen.group")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" www-data")]),s._v("\n")])])]),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[s._v("WARNING")]),s._v(" "),e("p",[s._v("Settings "),e("code",[s._v("listen.owner")]),s._v(" and "),e("code",[s._v("listen.group")]),s._v(" are your NGINX user (usually "),e("code",[s._v("www-data")]),s._v(").")])]),s._v(" "),e("h2",{attrs:{id:"_2-assign-each-spool-to-its-server-block"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-assign-each-spool-to-its-server-block"}},[s._v("#")]),s._v(" 2. Assign each spool to its server block")]),s._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),e("p",[s._v('A virtual host is called "server block" on NGINX world.')])]),s._v(" "),e("h3",{attrs:{id:"host-1"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#host-1"}},[s._v("#")]),s._v(" Host 1")]),s._v(" "),e("div",{staticClass:"language-nginx extra-class"},[e("pre",{pre:!0,attrs:{class:"language-nginx"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("server")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("location")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("~")]),s._v(" \\"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("php$ "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fastcgi_pass")]),s._v(" unix"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("run"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("php"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("myuser1"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sock"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),e("h3",{attrs:{id:"host-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#host-2"}},[s._v("#")]),s._v(" Host 2")]),s._v(" "),e("div",{staticClass:"language-nginx extra-class"},[e("pre",{pre:!0,attrs:{class:"language-nginx"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("server")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("location")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("~")]),s._v(" \\"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("php$ "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fastcgi_pass")]),s._v(" unix"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("run"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("php"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("myuser2"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sock"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),e("h2",{attrs:{id:"_3-restart-fpm-and-nginx-services"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-restart-fpm-and-nginx-services"}},[s._v("#")]),s._v(" 3. Restart FPM and NGINX services")]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" /etc/init.d/php7.0-fpm restart\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" nginx restart\n")])])]),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[s._v("WARNING")]),s._v(" "),e("p",[s._v("RESTART "),e("code",[s._v("fpm service")]),s._v(" when you change the fpm settings.")])]),s._v(" "),e("h2",{attrs:{id:"_4-testing"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-testing"}},[s._v("#")]),s._v(" 4. Testing")]),s._v(" "),e("p",[s._v("Create a "),e("code",[s._v("pinfo.php")]),s._v(" file (or whatever name) that will show the current process user:")]),s._v(" "),e("div",{staticClass:"language-php extra-class"},[e("pre",{pre:!0,attrs:{class:"language-php"}},[e("code",[e("span",{pre:!0,attrs:{class:"token php language-php"}},[e("span",{pre:!0,attrs:{class:"token delimiter important"}},[s._v("<?php")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// pinfo.php")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("echo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("str_replace")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('"\\n"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[s._v("'<br>'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("shell_exec")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[s._v("'ps -u -p '")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("getmypid")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])])]),e("p",[s._v('Then open "'),e("a",{attrs:{href:"http://.../pinfo.php",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://.../pinfo.php"),e("OutboundLink")],1),s._v('" on your browser:\n'),e("img",{attrs:{src:a(380),alt:"Previous code result on browser"}})]),s._v(" "),e("hr"),s._v(" "),e("h2",{attrs:{id:"why-to-use-multiple-users-security-reasons"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#why-to-use-multiple-users-security-reasons"}},[s._v("#")]),s._v(" Why to use multiple users (security reasons)")]),s._v(" "),e("p",[s._v("If you run all your websites on the same user ("),e("code",[s._v("www-data")]),s._v("), a PHP call to "),e("code",[s._v("system()")]),s._v(" / "),e("code",[s._v("passthru()")]),s._v(" / "),e("code",[s._v("exec()")]),s._v(" will have access to all your websites! "),e("strong",[s._v("NGINX will not protect you against this.")]),s._v(" PHP is just an example, but any popular web-server language has similar calls.")]),s._v(" "),e("p",[s._v('As a hacker, you can "'),e("code",[s._v("ls ..")]),s._v('" to navigate through all websites and "'),e("code",[s._v("cp")]),s._v("/"),e("code",[s._v("echo")]),s._v("/"),e("code",[s._v("mv")]),s._v("\" to write your own code on any file (including another website files). Even if all websites on the server are owned by the same person (ex. you) it's advisable to run each website with a different user, as it will prevent eventual hackers/virus (ex. WordPress viruses) from accessing your other websites.")])])}),[],!1,null,null,null);t.default=n.exports}}]);